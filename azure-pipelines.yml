# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
- main

pool:
  vmImage: linux-latest

parameters:
  - name: provisionType
    type: string
    default: Apply
    values:
      - Apply
      - Destroy
variables:
  - group: mygroup

steps:
  - task: Bash@3
    displayName: Install Terraform
    inputs:
      targetType: 'inline'
      script: |
          wget -qO -terraform.gpg https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/terraform-archive-keyring.gpg
          sudo echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/terraform-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" > /etc/apt/sources.list.d/terraform.list
          sudo apt update
          sudo apt install terraform
          terraform --version






